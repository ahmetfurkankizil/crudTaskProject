<!-- templates/home.html -->
<!DOCTYPE html>
<html>
<head>
    <title>Home</title>
    {% load static %}
</head>
<body>
<div id="app">
    <p>{{ message }}</p>
    <div>
        <h2>Projects</h2>
        <button @click="fetchProjects">List Projects</button>
        <ul>
            <li v-for="project in projects" :key="project.id">
                <strong>Name:</strong> {{ project.name }}<br>
                <strong>Slug:</strong> {{ project.slug }}<br>
                <strong>Description:</strong> {{ project.description }}<br>
                <strong>Language:</strong> {{ project.language }}<br>
                <strong>Repositories:</strong>
                <ul>
                    <li v-for="repo in project.repositories" :key="repo.id">
                        <strong>Title:</strong> {{ repo.title }}<br>
                        <strong>URL:</strong> <a :href="repo.url">{{ repo.url }}</a><br>
                        <strong>Type:</strong> {{ repo.type }}<br>
                        <strong>Email:</strong> {{ repo.email }}<br>
                    </li>
                </ul>
                <strong>Trackers:</strong>
                <ul>
                    <li v-for="tracker in project.trackers" :key="tracker.id">
                        <strong>Title:</strong> {{ tracker.title }}<br>
                        <strong>URL:</strong> <a :href="tracker.url">{{ tracker.url }}</a><br>
                        <strong>Type:</strong> {{ tracker.type }}<br>
                        <strong>Email:</strong> {{ tracker.email }}<br>
                    </li>
                </ul>
                <button @click="deleteProject(project.id)">Delete</button>
            </li>
        </ul>
        <h2>Create Project</h2>
        <form @submit.prevent="createProject">
            <input v-model="newProject.name" placeholder="Name" required>
            <input v-model="newProject.slug" placeholder="Slug" required>
            <input v-model="newProject.description" placeholder="Description" required>
            <input v-model="newProject.language" placeholder="Language" required>
            <button type="submit">Create Project</button>
        </form>
        <h2>Create Repository</h2>
        <form @submit.prevent="createRepository">
            <input v-model="newRepository.title" placeholder="Title" required>
            <input v-model="newRepository.url" placeholder="URL" required>
            <input v-model="newRepository.type" placeholder="Type" required>
            <input v-model="newRepository.email" placeholder="Email" required>
            <input v-model="newRepository.token" placeholder="Token" required>
            <input v-model="newRepository.project" placeholder="Project ID" required>
            <button type="submit">Create Repository</button>
        </form>
        <h2>Create Tracker</h2>
        <form @submit.prevent="createTracker">
            <input v-model="newTracker.title" placeholder="Title" required>
            <input v-model="newTracker.url" placeholder="URL" required>
            <input v-model="newTracker.type" placeholder="Type" required>
            <input v-model="newTracker.email" placeholder="Email" required>
            <input v-model="newTracker.token" placeholder="Token" required>
            <input v-model="newTracker.project" placeholder="Project ID" required>
            <button type="submit">Create Tracker</button>
        </form>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/vue@2.6.12/dist/vue.js"></script>
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script src="{% static 'js/index.js' %}"></script>
</body>
</html>
